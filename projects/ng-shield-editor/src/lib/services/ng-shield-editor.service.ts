import {Injectable} from '@angular/core';
import {NgShieldSettings} from '../ng-shield-settings';
import {NgShieldShapeService} from './ng-shield-shape.service';
import {NgShieldMotifService} from './ng-shield-motif.service';

@Injectable()
export class NgShieldEditorService {
  constructor(private _shapeSvc: NgShieldShapeService,
              private _motifSvc: NgShieldMotifService) {

  }

  public generateSVG(settings: NgShieldSettings): string {
    let shapeAttrs = `fill="${settings.color1}"`;

    if (settings.stroke) {
      shapeAttrs += ` stroke="${settings.color2}" stroke-width="8"`;
    }

    // prettier-ignore
    return `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <defs>
          <clipPath id="bg${settings.shape}">
            ${this._shapeSvc.available[settings.shape].replace('%attrs%', shapeAttrs)}
          </clipPath>
        </defs>

        <!-- Fondo -->
        ${this._shapeSvc.available[settings.shape].replace('%attrs%', shapeAttrs)}

        <!-- Motivo -->
        ${this._motifSvc.available[settings.motif].replace('%attrs%', `fill="${settings.color2}" clip-path="url(#bg${settings.shape})"`)}

        <!-- Gloss -->
        <path  clip-path="url(#bg${settings.shape})" d="M125.96,218.88c.8,1.62,1.67,3.21,2.61,4.75,2.18-1.48,4.57-.31,6.83.24,3.49,1.15,7.25-1.03,10.56,1.01-.91-1.9-3.95-4.03-2.08-6.13,2.28,1.97,4.07,5.46,7.56,5.11,2.17.27,3.82-1.26,5.43-2.46l-.21,3.54c2.04.75,4.23-.87,6.22.22a43.546,43.546,0,0,1,3.58,2.93c1.33-2.61-3.61-4.73-1.81-6.85,3.91,1.56,8.08,4.7,12.38,2.53,3.27.76,6.16,2.59,9.27,3.81,1.97.86,4.93.96,5.8-1.44q1.32,1.785,2.69,3.56c.81-.41,1.63-.82,2.45-1.22a14.71,14.71,0,0,0,2.73.29c2.93-.47,5.15,2,7.46,3.39.55-.24,1.09-.46,1.65-.69,1.98,1.67,4.53,3.97,7.31,2.73a7.66,7.66,0,0,1,6.12-.19c-.49-.98-.96-1.97-1.43-2.95,2.51,1.33,5.39.68,7.94,1.83,6.06,1.93,12.96,2.32,17.94,6.66,2.71-2.62,5.23.52,6.74,2.73,15.94,21,32.03,41.92,47.5,63.27-4.6,2.7-8.09-4.9-12.49-1.65,3,1.07,6.23,2.44,6.55,6.08l-1.84,1.16c-2.15-2.49-5.01-4.16-7.66-6.03-.11.95-.2,1.9-.3,2.86-3.33.9-4.54-3.13-7.04-4.51-1.81-1.44-4.41-.36-6.27-1.48a22.14,22.14,0,0,0-9.5-6.84c-.45,1.62-.9,3.24-1.33,4.86-4.18-4.44-10.94-3.95-15.52-7.75-1.23.82-2.15,2.52-3.65,2.64-1.48-.98-2.77-2.27-4.45-2.89-.15.92-.3,1.85-.44,2.78-3.62-.14-7.75.05-9.95-3.44-.23,1.19-.49,2.39-.8,3.58-.49-1.71-.91-3.43-1.28-5.16a20.49,20.49,0,0,1-3.1,4.35c-1.58-1.38-3.2-2.72-4.84-4.03.13,1.75,1.23,3.81-.32,5.24-2.37-1.02-4.88-2.79-7.25-.71a5.021,5.021,0,0,0-4.02-.03c-1.11-1.38-1.94-3.2-3.78-3.69-.26,1.07-.5,2.16-.75,3.24a37.661,37.661,0,0,0-5.33-6.15c-1.73.35-3.54,1.92-5.26.8.21-.45.63-1.36.84-1.81-2.21-.42-4.58-1.25-6.76-.31-2.57.89-4.95,3.77-7.78,1.97-1.52,1.48-4,2.17-4.62,4.38a29.9,29.9,0,0,0-.91-4.98c-.78.6-1.57,1.21-2.35,1.82-.57-.77-1.15-1.55-1.72-2.32-2.07.17-4.13.47-6.21.54-3.04-1.1-5.31-3.59-8.28-4.86-.45.9-.89,1.81-1.32,2.72a23.115,23.115,0,0,0-1.76-4.9c-.91,1.22-1.77,2.47-2.61,3.74a28.176,28.176,0,0,0-5.89-3.58c-1.15,2.05-3.22,2.39-5.37,2.13-.22.88-.43,1.76-.64,2.64a66.078,66.078,0,0,0-9.35-5.69,29,29,0,0,1,3.16,5.72c-3.62-1.75-7.37-4.33-8.83-8.23-.52-4.25-.22-8.53-.23-12.79.18-13.94-.03-27.89.23-41.83C123.33,224.78,125.82,221.89,125.96,218.88Z" style="opacity:0.07999999821186066;isolation:isolate"/>
        <path  clip-path="url(#bg${settings.shape})" d="M120.18,277.76c1.46,3.9,5.21,6.48,8.83,8.23a29,29,0,0,0-3.16-5.72,66.078,66.078,0,0,1,9.35,5.69c.21-.88.42-1.76.64-2.64,2.15.26,4.22-.08,5.37-2.13a28.176,28.176,0,0,1,5.89,3.58c.84-1.27,1.7-2.52,2.61-3.74a23.115,23.115,0,0,1,1.76,4.9c.43-.91.87-1.82,1.32-2.72,2.97,1.27,5.24,3.76,8.28,4.86,2.08-.07,4.14-.37,6.21-.54.57.77,1.15,1.55,1.72,2.32.78-.61,1.57-1.22,2.35-1.82a29.9,29.9,0,0,1,.91,4.98c.62-2.21,3.1-2.9,4.62-4.38,2.83,1.8,5.21-1.08,7.78-1.97,2.18-.94,4.55-.11,6.76.31-.21.45-.63,1.36-.84,1.81,1.72,1.12,3.53-.45,5.26-.8a37.661,37.661,0,0,1,5.33,6.15c.25-1.08.49-2.17.75-3.24,1.84.49,2.67,2.31,3.78,3.69a5.021,5.021,0,0,1,4.02.03c2.37-2.08,4.88-.31,7.25.71,1.55-1.43.45-3.49.32-5.24,1.64,1.31,3.26,2.65,4.84,4.03a20.49,20.49,0,0,0,3.1-4.35c.37,1.73.79,3.45,1.28,5.16.31-1.19.57-2.39.8-3.58,2.2,3.49,6.33,3.3,9.95,3.44.14-.93.29-1.86.44-2.78,1.68.62,2.97,1.91,4.45,2.89,1.5-.12,2.42-1.82,3.65-2.64,4.58,3.8,11.34,3.31,15.52,7.75.43-1.62.88-3.24,1.33-4.86a22.14,22.14,0,0,1,9.5,6.84c1.86,1.12,4.46.04,6.27,1.48,2.5,1.38,3.71,5.41,7.04,4.51.1-.96.19-1.91.3-2.86,2.65,1.87,5.51,3.54,7.66,6.03l1.84-1.16c-.32-3.64-3.55-5.01-6.55-6.08,4.4-3.25,7.89,4.35,12.49,1.65q27.315,37.02,53.07,75.17c4.13,5.92,7.68,12.22,12.03,17.99a22.075,22.075,0,0,1,3.17,6.16c-16.04,23.96-39.6,43.05-66.84,52.76-.34.04-1.02.11-1.36.15-46.35-25.94-91.61-53.82-135.87-83.18-14.71-10.36-29.98-19.94-44.31-30.83-1.37-3.37-.74-7.19-1.03-10.75C120.05,314.6,120.15,296.18,120.18,277.76Z" style="opacity:0.12999999523162842;isolation:isolate"/>
        <path  clip-path="url(#bg${settings.shape})" d="M121.09,343.77c14.33,10.89,29.6,20.47,44.31,30.83,44.26,29.36,89.52,57.24,135.87,83.18-9.59,4.06-19.97,5.79-30.22,7.21-7.42,2.63-15.42,1.75-23.15,1.66-3.43.14-6.45-1.81-9.84-2.03A135.755,135.755,0,0,1,124.25,363.89C122.75,357.27,120.97,350.61,121.09,343.77Z" style="opacity:0.2199999988079071;isolation:isolate"/>
      </svg>
    `;
  }

  public generateBase64PNG(settings: NgShieldSettings): string {
    // Usar canvas para generar PNG
    return null;
  }
}
